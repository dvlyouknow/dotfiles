
# set history options
HISTSIZE=10000
SAVEHIST=10000
HISTFILE=~/.histfile
bindkey -v

# man 1 zshoptions
setopt incappendhistory histignorealldups sharehistory extendedhistory
setopt autocd extendedglob correct autopushd
setopt notify
setopt interactivecomments

unsetopt nomatch

autoload -Uz promptinit
promptinit

zstyle ':completion:*' auto-description 'specify: %d'
zstyle ':completion:*' completer _expand _complete _extensions _ignored _approximate
zstyle ':completion:*' max-errors 2
zstyle ':completion:*' menu select
zstyle ':completion:*' verbose true
zstyle ':completion:*' use-cache on
zstyle ':completion:*' cache-path ~/.zsh/cache
# zstyle -e ':completion:*:default' list-colors 'reply=("${PREFIX:+=(#bi)($PREFIX:t)(?)*==34=1;36}:${(s.:.)LS_COLORS}")'
zstyle ':completion:*:default' list-colors ${(s.:.)LS_COLORS}
zstyle ':completion:*' list-colors ''


zstyle ':completion:*:*:kill:*:processes' list-colors '=(#b) #([[:digit:]]#)*=34=31'
# TODO: change for macos
zstyle ':completion:*:kill:*' command 'ps -u $USER -o pid,cmd'
autoload -Uz compinit && compinit
autoload bashcompinit && bashcompinit

# TODO: move to a bash completion file?
complete -C '{{ lookPath "aws_completer" }}' aws
complete -o nospace -C '/home/jason/.asdf/shims/terraform' terraform

{{ template "aliases.tmpl" . }}
{{ template "functions.tmpl" . }}

source "$HOME/.zshrc.local"

{{ if stat "/opt/asdf-vm/asdf.sh" -}}
source "/opt/asdf-vm/asdf.sh"
{{- end }}

{{ if lookPath "starship" -}}
{{ output "starship" "init" "zsh" }}
{{- else -}}
# starship init omitted
{{- end }}

export ZSH_HIGHLIGHT_HIGHLIGHTERS=(main brackets)
{{ output (joinPath .chezmoi.sourceDir "helpers" "zsh-syntax-highlighter-finder.sh") }}
